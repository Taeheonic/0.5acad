<!DOCTYPE html>
<html>
<head>
<title>mapboxgl-jupyter viz</title>
<meta charset='UTF-8' />
<meta name='viewport'
      content='initial-scale=1,maximum-scale=1,user-scalable=no' />
<script type='text/javascript'
        src='https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.js'></script>
<link type='text/css'
      href='https://api.tiles.mapbox.com/mapbox-gl-js/v1.0.0/mapbox-gl.css' 
      rel='stylesheet' />

<style type='text/css'>
    body { margin:0; padding:0; }
    .map { position: absolute; top:0; bottom:0; width:100%; }
    .legend {
        background-color: white;
        color: #6e6e6e;
        border-radius: 3px;
        bottom: 10px;
        box-shadow: 0 1px 2px rgba(0, 0, 0, 0.10);
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
        padding: 0;
        position: absolute;
        right: 10px;
        z-index: 1;
        min-width: 100px;
    }
   .legend.horizontal {bottom: 10px; text-align: left;}

    /* legend header */
    .legend .legend-header { border-radius: 3px 3px 0 0; background: white; }
    .legend .legend-title {
        padding: 6px 12px 6px 12px;
        text-shadow: 0 0 2px white;
        text-transform: capitalize;
        text-align: center;
        font-weight: bold !important;
        font-size: 14px;
        font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif;
        max-width: 160px;
    }
    .legend-title {padding: 6px 12px 6px 12px; text-shadow: 0 0 2px #FFF; text-transform: capitalize; text-align: center; max-width: 160px; font-size: 0.9em; font-weight: bold;}
    .legend.horizontal .legend-title {text-align: left;}

    /* legend items */
    .legend-content {margin: 6px 12px 6px 12px; overflow: hidden; padding: 0; float: left; list-style: none; font-size: 0.8em;}
    .legend.vertical .legend-item {white-space: nowrap;}
    .legend-value {display: inline-block; line-height: 18px; vertical-align: top;}
    .legend.horizontal ul.legend-content li.legend-item .legend-value,
    .legend.horizontal ul.legend-content li.legend-item {display: inline-block; float: left; width: 30px; margin-bottom: 0; text-align: center; min-height: 30px;}

    /* legend key styles */
    .legend-key {display: inline-block; height: 10px;}
    .legend-key.default, .legend-key.square {border-radius: 0;}
    .legend-key.circle {border-radius: 50%;}
    .legend-key.rounded-square {border-radius: 20%;}
    .legend.vertical .legend-key {width: 10px; margin-right: 5px; margin-left: 1px;}
    .legend.horizontal .legend-key {width: 30px; margin-right: 0; margin-top: 1px; float: left;}
    .legend.horizontal .legend-key.square, .legend.horizontal .legend-key.rounded-square, .legend.horizontal .legend-key.circle {margin-left: 10px; width: 10px;}
    .legend.horizontal .legend-key.line {margin-left: 5px;}
    .legend.horizontal .legend-key.line, .legend.vertical .legend-key.line {border-radius: 10%; width: 20px; height: 3px; margin-bottom: 2px;}

    /* gradient bar alignment */
    .gradient-bar {margin: 6px 12px 6px 12px;}
    .legend.horizontal .gradient-bar {width: 88%; height: 10px;}
    .legend.vertical .gradient-bar {width: 10px; min-height: 50px; position: absolute; bottom: 4px;}

    /* contiguous vertical bars (discrete) */
    .legend.vertical.contig .legend-key {height: 15px; width: 10px;}
    .legend.vertical.contig li.legend-item {height: 15px;}
    .legend.vertical.contig {padding-bottom: 6px;}

    /* vertical radius legend */
    .legend.horizontal.legend-variable-radius ul.legend-content li.legend-item .legend-value,
    .legend.horizontal.legend-variable-radius ul.legend-content li.legend-item {width: 30px; min-height: 20px;}

    /* scale annotation */
    .mapboxgl-ctrl.mapboxgl-ctrl-scale { border-color: #6e6e6e; 
                                         background-color: white; 
                                         color: #131516; }
</style>


<style>
    .gradient-bar.bordered, .legend-key.bordered { border: solid black 0.5px; }
</style>


</head>
<body>

<div id='map' class='map'></div>

<script type='text/javascript'>

var legendHeader;

function calcColorLegend(myColorStops, title) {
    // create legend
    var legend = document.createElement('div'),
        legendContainer = document.getElementsByClassName('mapboxgl-ctrl-bottom-right')[0];

    if ('circle' === 'contiguous-bar') {
        legend.className = 'legend vertical contig';
    }
    else {
        legend.className = 'legend vertical';
    }
    legend.id = 'legend-0';
    document.body.appendChild(legend);
    // add legend header and content elements
    var mytitle = document.createElement('div'),
        legendContent = document.createElement('ul');
    legendHeader = document.createElement('div');
    mytitle.textContent = title;
    mytitle.className = 'legend-title'
    legendHeader.className = 'legend-header'
    legendContent.className = 'legend-content'
    legendHeader.appendChild(mytitle);
    legend.appendChild(legendHeader);
    legend.appendChild(legendContent);
    if (false === true) {
        var gradientText = 'linear-gradient(to right, ',
            gradient = document.createElement('div');
        gradient.className = 'gradient-bar';
        legend.appendChild(gradient);
    }
    // calculate a legend entries on a Mapbox GL Style Spec property function stops array
    for (p = 0; p < myColorStops.length; p++) {
        if (!!document.getElementById('legend-color-points-value-' + p)) {
            // update the legend if it already exists
            document.getElementById('legend-color-points-value-' + p).textContent = myColorStops[p][0];
            document.getElementById('legend-color-points-id-' + p).style.backgroundColor = myColorStops[p][1];
        }
        else {
            // create the legend if it doesn't yet exist
            var item = document.createElement('li');
            item.className = 'legend-item';
            var key = document.createElement('span');
            key.className = 'legend-key circle';
            key.id = 'legend-color-points-id-' + p;
            key.style.backgroundColor = myColorStops[p][1];
            var value = document.createElement('span');
            value.className = 'legend-value';
            value.id = 'legend-color-points-value-' + p;
            item.appendChild(key);
            item.appendChild(value);
            legendContent.appendChild(item);
            
            data = document.getElementById('legend-color-points-value-' + p)
            // round number values in legend if precision defined
            if ((typeof(myColorStops[p][0]) == 'number') && (typeof(null) == 'number')) {
                data.textContent = myColorStops[p][0].toFixed(null);
            }
            else {
                data.textContent = myColorStops[p][0];
            }
            // add color stop to gradient list
            if (false === true) {
                if (p < myColorStops.length - 1) {
                    gradientText = gradientText + myColorStops[p][1] + ', ';
                }
                else {
                    gradientText = gradientText + myColorStops[p][1] + ')';
                }
                if ('vertical' === 'vertical') {
                    gradientText = gradientText.replace('to right', 'to bottom');
                }
            }
        }
    }
    if (false === true) {
        // convert to gradient scale appearance
        gradient.style.background = gradientText;
        // hide legend keys generated above
        var keys = document.getElementsByClassName('legend-key');
        for (var i=0; i < keys.length; i++) {
            keys[i].style.visibility = 'hidden';
        }
        if ('vertical' === 'vertical') {
            gradient.style.height = (legendContent.offsetHeight - 6) + 'px';
        }
    }
    // add class for styling bordered legend keys
    if (true) {
        var keys = document.getElementsByClassName('legend-key');
        for (var i=0; i < keys.length; i++) {
            if (keys[i]) {
                keys[i].classList.add('bordered');
            }
        }
        var gradientBars = document.getElementsByClassName('gradient-bar');
        for (var i=0; i < keys.length; i++) {
            if (gradientBars[i]) {
                gradientBars[i].classList.add('bordered');
            }
        }
    }
    // update right-margin for compact Mapbox attribution based on calculated legend width
    updateAttribMargin(legend);
    updateLegendMargin(legend);
}


function calcRadiusLegend(myRadiusStops, title, color) {

    // maximum legend item height
    var maxLegendItemHeight = 2 * myRadiusStops[myRadiusStops.length - 1][1];

    // create legend
    var legend = document.createElement('div');
    legend.className = 'legend vertical legend-variable-radius';

    legend.id = 'legend-1';
    document.body.appendChild(legend);

    // add legend header and content elements
    var mytitle = document.createElement('div'),
        legendContent = document.createElement('ul');
    legendHeader = document.createElement('div');
    mytitle.textContent = title;
    mytitle.className = 'legend-title'
    legendHeader.className = 'legend-header'
    legendContent.className = 'legend-content'
    legendHeader.appendChild(mytitle);
    legend.appendChild(legendHeader);
    legend.appendChild(legendContent);

    // calculate a legend entries on a Mapbox GL Style Spec property function stops array
    for (p = 0; p < myRadiusStops.length; p++) {
        if (!!document.getElementById('legend-radius-points-value-' + p)) {
            //update the legend if it already exists
            document.getElementById('legend-radius-points-value-' + p).textContent = myRadiusStops[p][0];
            document.getElementById('legend-radius-points-id-' + p).style.backgroundColor = color;
        }
        else {
            // create the legend if it doesn't yet exist
            var item = document.createElement('li');
            item.className = 'legend-item';
            item.height = '' + maxLegendItemHeight + 'px';

            var key = document.createElement('span');
            key.className = 'legend-key circle';
            key.id = 'legend-radius-points-id-' + p;
            key.style.backgroundColor = color;   

            key.style.width = '' + myRadiusStops[p][1] * 2 + 'px';
            key.style.height = '' + myRadiusStops[p][1] * 2 + 'px';

            keyVerticalMargin = (maxLegendItemHeight - myRadiusStops[p][1] * 2) * 0.5;
            key.style.marginTop = '' + keyVerticalMargin + 'px';
            key.style.marginBottom = '' + keyVerticalMargin + 'px';

            var value = document.createElement('span');
            value.className = 'legend-value';
            value.id = 'legend-radius-points-value-' + p;

            item.appendChild(key);
            item.appendChild(value);
            legendContent.appendChild(item);
            
            data = document.getElementById('legend-radius-points-value-' + p)

            // round number values in legend if precision defined
            if ((typeof(myRadiusStops[p][0]) == 'number') && (typeof(null) == 'number')) {
                data.textContent = myRadiusStops[p][0].toFixed(null);
            }
            else {
                data.textContent = myRadiusStops[p][0];
            }
        }
    }

    // add class for styling bordered legend keys
    if (true) {
        var keys = document.getElementsByClassName('legend-key');
        for (var i=0; i < keys.length; i++) {
            if (keys[i]) {
                keys[i].classList.add('bordered');
            }
        }
    }

    // update right-margin for compact Mapbox attribution based on calculated legend width
    updateAttribMargin(legend);
    updateLegendMargin(legend);

}


function updateAttribMargin(legend) {

    // default margin is based on calculated legend width
    var attribMargin = legend.offsetWidth + 15;
    
    // if horizontal legend layout (multiple legends are stacked vertically)
    if ('vertical' === 'horizontal') {
        document.getElementsByClassName('mapboxgl-ctrl-attrib')[0].style.marginRight = (attribMargin).toString() + 'px';
    }
    // vertical legend layout means multiple legends are side-by-side
    else if ('vertical' === 'vertical') {
        var currentMargin = Number(document.getElementsByClassName('mapboxgl-ctrl-attrib')[0].style.marginRight.replace('px', ''));
        document.getElementsByClassName('mapboxgl-ctrl-attrib')[0].style.marginRight = (attribMargin + currentMargin).toString() + 'px';
    }
}


function updateLegendMargin(legend) {

    var verticalLegends = document.getElementsByClassName('legend vertical'),
        horizontalLegends = document.getElementsByClassName('legend horizontal');

    if (verticalLegends.length > 1) {
        for (i = 1; i < verticalLegends.length; i++) {
            verticalLegends[i].style.marginRight = (legend.offsetWidth - 5).toString() + 'px';
            var legend = verticalLegends[i];
        }
    }
    else if (horizontalLegends.length > 1) {
        for (i = 1; i < horizontalLegends.length; i++) {
            horizontalLegends[i].style.marginBottom = (legend.offsetHeight + 15).toString() + 'px';
            var legend = horizontalLegends[i];
        }
    }
}


function generateInterpolateExpression(propertyValue, stops) {
    var expression;
    if (propertyValue == 'zoom') {
        expression = ['interpolate', ['exponential', 1.2], ['zoom']]
    }
    else if (propertyValue == 'heatmap-density') {
        expression = ['interpolate', ['linear'], ['heatmap-density']]
    }
    else {
        expression = ['interpolate', ['linear'], ['get', propertyValue]]
    }

    for (var i=0; i<stops.length; i++) {
        expression.push(stops[i][0], stops[i][1])
    }
    return expression
}


function generateMatchExpression(propertyValue, stops, defaultValue) {
    var expression;
    expression = ['match', ['get', propertyValue]]
    for (var i=0; i<stops.length; i++) {
        expression.push(stops[i][0], stops[i][1])
    }
    expression.push(defaultValue)
    
    return expression
}


function generatePropertyExpression(expressionType, propertyValue, stops, defaultValue) {
    var expression;
    if (expressionType == 'match') {
        expression = generateMatchExpression(propertyValue, stops, defaultValue)
    }
    else if (propertyValue == 'identity') {
        expression = ['get', propertyValue]
    }
    else {
        expression = generateInterpolateExpression(propertyValue, stops)
    }

    return expression
}

</script>

<!-- main map creation code, extended by mapboxgl/templates/graduated_circle.html -->
<script type="text/javascript">

    mapboxgl.accessToken = 'pk.eyJ1Ijoicm14enphbmciLCJhIjoiY2s3N2ZyNGZnMDZucDNmcjE0aDQ3dGhseiJ9.BsOXweuBOnwYDbR4BXNguQ';

    var transformRequest = function(url, resourceType) {
        const isMapboxRequest = url.slice(8, 22) === 'api.mapbox.com' ||
          url.slice(10, 26) === 'tiles.mapbox.com';
      
        return {
          url: isMapboxRequest ? url.replace('?', '?pluginName=PythonMapboxgl&') : url
        }
    };

    var map = new mapboxgl.Map({
        container: 'map',
        attributionControl: false,
        style: 'mapbox://styles/mapbox/outdoors-v11',
        center: [127.45, 36.62],
        zoom: 12,
        pitch: 0,
        bearing: 0,
        scrollZoom: true,
        touchZoom: true,
        doubleClickZoom: true,
        boxZoom: true,
        preserveDrawingBuffer: true,
        transformRequest: transformRequest
    });

    
    
        map.addControl(new mapboxgl.AttributionControl({ compact: true }));

    

    

        map.addControl(new mapboxgl.NavigationControl());

    

    
    
    
        
        
            
            calcColorLegend([[82, 'rgb(215,48,39)'], [699, 'rgb(244,109,67)'], [1316, 'rgb(253,174,97)'], [1933, 'rgb(254,224,144)'], [2550, 'rgb(255,255,191)'], [3167, 'rgb(224,243,248)'], [3784, 'rgb(171,217,233)'], [4401, 'rgb(116,173,209)'], [5018, 'rgb(69,117,180)']], "1km 내 전체 상가 개수");

        

        

            calcRadiusLegend([[82, 2.0], [699, 3.44], [1316, 4.89], [1933, 6.33], [2550, 7.78], [3167, 9.22], [3784, 10.67], [4401, 12.11], [5018, 13.56]], "1km 내 전체 상가 개수", "white");
        
        

    



    
        
        
        
            map.addControl(new mapboxgl.ScaleControl({ unit: 'metric' }), 'bottom-left');
        
        

    

    

    map.on('style.load', function() {
        
        

        map.addSource("data", {
            "type": "geojson",
            "data": {"type": "FeatureCollection", "features": [{"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.435046, 36.632517]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7200, "단지명": "대림가경", "세대 수": 386, "준공년월": 199301, "1km 내 전체 상가 개수": 4352}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.441352, 36.6233]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7203, "단지명": "덕일한마음", "세대 수": 448, "준공년월": 199706, "1km 내 전체 상가 개수": 3992}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.442628, 36.621585]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7206, "단지명": "동부", "세대 수": 455, "준공년월": 199806, "1km 내 전체 상가 개수": 3289}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.433126, 36.632138]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7208, "단지명": "벽산", "세대 수": 380, "준공년월": 199212, "1km 내 전체 상가 개수": 4488}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.440877, 36.624163]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7212, "단지명": "삼일원앙", "세대 수": 520, "준공년월": 199706, "1km 내 전체 상가 개수": 4150}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.438356, 36.629415]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7216, "단지명": "가경세원2차", "세대 수": 620, "준공년월": 199211, "1km 내 전체 상가 개수": 4098}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.43921, 36.627283]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7220, "단지명": "세원가경골", "세대 수": 952, "준공년월": 199708, "1km 내 전체 상가 개수": 4065}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.43712, 36.63077]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7222, "단지명": "가경신라", "세대 수": 324, "준공년월": 199305, "1km 내 전체 상가 개수": 4226}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.44157, 36.62229]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7225, "단지명": "가경태암수정", "세대 수": 450, "준공년월": 199707, "1km 내 전체 상가 개수": 3672}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.437138, 36.629391]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7230, "단지명": "형석1차", "세대 수": 600, "준공년월": 199212, "1km 내 전체 상가 개수": 4328}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.437241, 36.632059]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7234, "단지명": "가경형석2차", "세대 수": 370, "준공년월": 199311, "1km 내 전체 상가 개수": 4015}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.440297, 36.620781]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7249, "단지명": "효성", "세대 수": 320, "준공년월": 199712, "1km 내 전체 상가 개수": 3275}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.439407, 36.626391]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7254, "단지명": "가경대원", "세대 수": 940, "준공년월": 199707, "1km 내 전체 상가 개수": 4076}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.440412, 36.621908]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 7259, "단지명": "진로", "세대 수": 320, "준공년월": 199901, "1km 내 전체 상가 개수": 3892}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.4668, 36.62345]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 7265, "단지명": "두산한솔1차", "세대 수": 206, "준공년월": 199305, "1km 내 전체 상가 개수": 1559}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.468485, 36.623614]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 7267, "단지명": "두산한솔2차", "세대 수": 180, "준공년월": 199311, "1km 내 전체 상가 개수": 1626}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.468421, 36.624803]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 7270, "단지명": "두진백로1단지", "세대 수": 227, "준공년월": 199304, "1km 내 전체 상가 개수": 1687}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.468983, 36.624355]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 7274, "단지명": "개신두진백로2차", "세대 수": 110, "준공년월": 199312, "1km 내 전체 상가 개수": 1694}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.46686, 36.627374]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 7279, "단지명": "삼익", "세대 수": 744, "준공년월": 199102, "1km 내 전체 상가 개수": 2310}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.465004, 36.624247]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 7283, "단지명": "송학삼익맨션", "세대 수": 330, "준공년월": 199202, "1km 내 전체 상가 개수": 1393}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.45156, 36.624916]}, "properties": {"시군구": "충청북도 청주상당구 탑동", "ID": 7288, "단지명": "현대", "세대 수": 511, "준공년월": 199012, "1km 내 전체 상가 개수": 2143}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.471565, 36.62607]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 7292, "단지명": "금호타운", "세대 수": 418, "준공년월": 199502, "1km 내 전체 상가 개수": 1979}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.476911, 36.625931]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 7295, "단지명": "두산한솔", "세대 수": 392, "준공년월": 199410, "1km 내 전체 상가 개수": 2292}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.478865, 36.624597]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 7300, "단지명": "삼익세라믹", "세대 수": 229, "준공년월": 198908, "1km 내 전체 상가 개수": 2976}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.476092, 36.627991]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 7303, "단지명": "삼호", "세대 수": 254, "준공년월": 199108, "1km 내 전체 상가 개수": 2113}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.474756, 36.627138]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 7307, "단지명": "주공", "세대 수": 330, "준공년월": 198511, "1km 내 전체 상가 개수": 2056}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.470063, 36.627751]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 7309, "단지명": "주공2단지", "세대 수": 640, "준공년월": 198908, "1km 내 전체 상가 개수": 2187}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.480877, 36.621379]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 7313, "단지명": "형석", "세대 수": 204, "준공년월": 198308, "1km 내 전체 상가 개수": 2973}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.438667, 36.637464]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 7318, "단지명": "복대대원", "세대 수": 812, "준공년월": 199910, "1km 내 전체 상가 개수": 2340}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.442455, 36.626974]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 7324, "단지명": "삼일(2008)", "세대 수": 230, "준공년월": 199009, "1km 내 전체 상가 개수": 3694}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.44263, 36.626037]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 7330, "단지명": "세원", "세대 수": 200, "준공년월": 199008, "1km 내 전체 상가 개수": 3677}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.428603, 36.637497]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 7335, "단지명": "세원느티마을", "세대 수": 526, "준공년월": 199909, "1km 내 전체 상가 개수": 3132}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.451431, 36.635198]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 7343, "단지명": "청송", "세대 수": 100, "준공년월": 198105, "1km 내 전체 상가 개수": 2439}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.437921, 36.633928]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 7345, "단지명": "현대1차", "세대 수": 380, "준공년월": 199905, "1km 내 전체 상가 개수": 3718}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.439834, 36.630701]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 7350, "단지명": "형석(992)", "세대 수": 355, "준공년월": 199001, "1km 내 전체 상가 개수": 3822}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.432364, 36.636929]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 7372, "단지명": "현대2차", "세대 수": 1464, "준공년월": 199905, "1km 내 전체 상가 개수": 3167}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.462457, 36.633581]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 7377, "단지명": "신라", "세대 수": 70, "준공년월": 198602, "1km 내 전체 상가 개수": 2930}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.464708, 36.636295]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 7390, "단지명": "현대(227-2)", "세대 수": 229, "준공년월": 198812, "1km 내 전체 상가 개수": 3163}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.47864, 36.616566]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 7396, "단지명": "대림2차", "세대 수": 120, "준공년월": 198707, "1km 내 전체 상가 개수": 3269}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.481981, 36.616824]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 7399, "단지명": "모란", "세대 수": 110, "준공년월": 197906, "1km 내 전체 상가 개수": 3336}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.474144, 36.616772]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 7401, "단지명": "산남세원청실", "세대 수": 417, "준공년월": 199505, "1km 내 전체 상가 개수": 2265}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.4797, 36.61938]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 7407, "단지명": "주공", "세대 수": 1240, "준공년월": 199012, "1km 내 전체 상가 개수": 2197}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.479223, 36.617876]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 7410, "단지명": "산남주공3차", "세대 수": 510, "준공년월": 199111, "1km 내 전체 상가 개수": 3289}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.474627, 36.61973]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 7418, "단지명": "산남주공4단지", "세대 수": 1005, "준공년월": 199307, "1km 내 전체 상가 개수": 2191}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.471215, 36.656015]}, "properties": {"시군구": "충청북도 청주흥덕구 신봉동", "ID": 7427, "단지명": "두진백로", "세대 수": 244, "준공년월": 199311, "1km 내 전체 상가 개수": 1601}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.468, 36.65583]}, "properties": {"시군구": "충청북도 청주흥덕구 신봉동", "ID": 7433, "단지명": "삼성(159)", "세대 수": 570, "준공년월": 199211, "1km 내 전체 상가 개수": 1638}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.468135, 36.64854]}, "properties": {"시군구": "충청북도 청주흥덕구 신봉동", "ID": 7438, "단지명": "주공", "세대 수": 1200, "준공년월": 198611, "1km 내 전체 상가 개수": 2793}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.473877, 36.652774]}, "properties": {"시군구": "충청북도 청주흥덕구 운천동", "ID": 7450, "단지명": "무지개", "세대 수": 639, "준공년월": 199408, "1km 내 전체 상가 개수": 2040}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.472835, 36.651462]}, "properties": {"시군구": "충청북도 청주흥덕구 운천동", "ID": 7454, "단지명": "세원", "세대 수": 270, "준공년월": 198610, "1km 내 전체 상가 개수": 2095}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.472976, 36.650409]}, "properties": {"시군구": "충청북도 청주흥덕구 운천동", "ID": 7459, "단지명": "진양", "세대 수": 420, "준공년월": 198609, "1km 내 전체 상가 개수": 2173}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.47167, 36.652366]}, "properties": {"시군구": "충청북도 청주흥덕구 운천동", "ID": 7461, "단지명": "형석", "세대 수": 290, "준공년월": 198711, "1km 내 전체 상가 개수": 2013}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.422952, 36.633505]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 7473, "단지명": "삼일", "세대 수": 365, "준공년월": 199006, "1km 내 전체 상가 개수": 2035}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.420798, 36.640325]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 7478, "단지명": "효성1차", "세대 수": 894, "준공년월": 199509, "1km 내 전체 상가 개수": 2092}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.420294, 36.641406]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 7482, "단지명": "비하효성2차", "세대 수": 478, "준공년월": 199707, "1km 내 전체 상가 개수": 1911}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.482853, 36.610087]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 7485, "단지명": "우성2차", "세대 수": 388, "준공년월": 199011, "1km 내 전체 상가 개수": 3359}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.491737, 36.612135]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 7487, "단지명": "주공2단지", "세대 수": 1310, "준공년월": 199706, "1km 내 전체 상가 개수": 3945}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.494239, 36.612569]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 7493, "단지명": "주공3단지", "세대 수": 1330, "준공년월": 199706, "1km 내 전체 상가 개수": 4459}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.49376, 36.60953]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 7498, "단지명": "주공4단지", "세대 수": 1314, "준공년월": 199906, "1km 내 전체 상가 개수": 4049}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.495502, 36.607365]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 7500, "단지명": "주공5단지", "세대 수": 1350, "준공년월": 199802, "1km 내 전체 상가 개수": 3784}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.487843, 36.607657]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 7510, "단지명": "주공7단지", "세대 수": 930, "준공년월": 199712, "1km 내 전체 상가 개수": 3037}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.487288, 36.609618]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 7511, "단지명": "현대대우", "세대 수": 1179, "준공년월": 199907, "1km 내 전체 상가 개수": 3386}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.490669, 36.609661]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 7513, "단지명": "대원", "세대 수": 731, "준공년월": 200010, "1km 내 전체 상가 개수": 3366}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.49186, 36.6074]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 7516, "단지명": "주공6단지", "세대 수": 1120, "준공년월": 199909, "1km 내 전체 상가 개수": 3239}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.463197, 36.647769]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 9980, "단지명": "삼정백조", "세대 수": 199, "준공년월": 199310, "1km 내 전체 상가 개수": 2887}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.42443, 36.625644]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 10437, "단지명": "대림", "세대 수": 284, "준공년월": 199011, "1km 내 전체 상가 개수": 2565}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.445295, 36.62231]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 10630, "단지명": "청주개신주공3단지", "세대 수": 634, "준공년월": 200307, "1km 내 전체 상가 개수": 3027}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.425156, 36.634768]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 11206, "단지명": "세원테마빌", "세대 수": 388, "준공년월": 200112, "1km 내 전체 상가 개수": 2667}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.454983, 36.646894]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 11517, "단지명": "봉명세원", "세대 수": 276, "준공년월": 199307, "1km 내 전체 상가 개수": 2321}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.426938, 36.637345]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 11554, "단지명": "두진백로", "세대 수": 527, "준공년월": 199908, "1km 내 전체 상가 개수": 3209}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.424914, 36.635713]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 11555, "단지명": "벽산", "세대 수": 274, "준공년월": 199906, "1km 내 전체 상가 개수": 2514}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.454411, 36.64554]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 11628, "단지명": "푸른", "세대 수": 603, "준공년월": 199412, "1km 내 전체 상가 개수": 2255}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.48095, 36.6125]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 11630, "단지명": "럭키", "세대 수": 156, "준공년월": 199211, "1km 내 전체 상가 개수": 3530}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.491728, 36.61017]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 11644, "단지명": "주은프레지던트", "세대 수": 620, "준공년월": 200111, "1km 내 전체 상가 개수": 3491}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.42168, 36.642042]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 11745, "단지명": "송곡그린", "세대 수": 162, "준공년월": 200006, "1km 내 전체 상가 개수": 1985}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.459868, 36.65208]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 12020, "단지명": "봉명아이파크", "세대 수": 1222, "준공년월": 200503, "1km 내 전체 상가 개수": 2063}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.480531, 36.609545]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 12032, "단지명": "우성1차", "세대 수": 412, "준공년월": 199010, "1km 내 전체 상가 개수": 2985}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.45781, 36.65212]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 12057, "단지명": "두진하트리움", "세대 수": 204, "준공년월": 200305, "1km 내 전체 상가 개수": 1884}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.47297, 36.62658]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 12097, "단지명": "삼우", "세대 수": 40, "준공년월": 198601, "1km 내 전체 상가 개수": 1973}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.47244, 36.61892]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 12786, "단지명": "한마음1차", "세대 수": 435, "준공년월": 199504, "1km 내 전체 상가 개수": 2273}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.471643, 36.620108]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 12787, "단지명": "한마음2차", "세대 수": 228, "준공년월": 199504, "1km 내 전체 상가 개수": 2074}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.474897, 36.616135]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 12824, "단지명": "두진백로", "세대 수": 935, "준공년월": 199505, "1km 내 전체 상가 개수": 2371}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.424383, 36.638008]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 12832, "단지명": "영조아름다운나날1차", "세대 수": 952, "준공년월": 200310, "1km 내 전체 상가 개수": 2850}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.465876, 36.63712]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 12938, "단지명": "중앙", "세대 수": 80, "준공년월": 198505, "1km 내 전체 상가 개수": 3408}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.447307, 36.619246]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 12983, "단지명": "청주개신푸르지오", "세대 수": 920, "준공년월": 200411, "1km 내 전체 상가 개수": 2352}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.4722, 36.61978]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 13013, "단지명": "세원홍실", "세대 수": 224, "준공년월": 199609, "1km 내 전체 상가 개수": 2200}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.440377, 36.62983]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 13149, "단지명": "덕일", "세대 수": 350, "준공년월": 198912, "1km 내 전체 상가 개수": 3878}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.425467, 36.626073]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 13344, "단지명": "우정", "세대 수": 233, "준공년월": 199203, "1km 내 전체 상가 개수": 2824}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.4235, 36.62409]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 13426, "단지명": "우림", "세대 수": 132, "준공년월": 200105, "1km 내 전체 상가 개수": 2037}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.433421, 36.634645]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 13560, "단지명": "아름다운나날2차", "세대 수": 539, "준공년월": 200411, "1km 내 전체 상가 개수": 4002}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.468196, 36.64617]}, "properties": {"시군구": "충청북도 청주흥덕구 신봉동", "ID": 13906, "단지명": "삼정백조", "세대 수": 564, "준공년월": 199507, "1km 내 전체 상가 개수": 2877}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.480749, 36.610456]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 13988, "단지명": "보성", "세대 수": 155, "준공년월": 199212, "1km 내 전체 상가 개수": 3246}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.42344, 36.62461]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 15425, "단지명": "덕흥", "세대 수": 48, "준공년월": 199211, "1km 내 전체 상가 개수": 2125}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.423496, 36.62354]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 15426, "단지명": "청도", "세대 수": 207, "준공년월": 200010, "1km 내 전체 상가 개수": 1910}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.46444, 36.62853]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 15428, "단지명": "삼익2차", "세대 수": 390, "준공년월": 199302, "1km 내 전체 상가 개수": 2439}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.446901, 36.624399]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 15431, "단지명": "시영(청주)", "세대 수": 141, "준공년월": 199012, "1km 내 전체 상가 개수": 2724}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.462953, 36.628185]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 15432, "단지명": "한진신세대", "세대 수": 336, "준공년월": 199602, "1km 내 전체 상가 개수": 2285}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.473664, 36.62489]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 15433, "단지명": "그린맨션", "세대 수": 96, "준공년월": 198708, "1km 내 전체 상가 개수": 2094}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.48081, 36.62876]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 15434, "단지명": "모충청송", "세대 수": 94, "준공년월": 199407, "1km 내 전체 상가 개수": 4783}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.435045, 36.634256]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 15438, "단지명": "삼일(3034)", "세대 수": 478, "준공년월": 199811, "1km 내 전체 상가 개수": 4038}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.448041, 36.632344]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 15441, "단지명": "성광", "세대 수": 140, "준공년월": 198206, "1km 내 전체 상가 개수": 2530}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.45614, 36.64172]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 15444, "단지명": "주공1단지", "세대 수": 574, "준공년월": 198312, "1km 내 전체 상가 개수": 2891}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.456106, 36.645598]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 15445, "단지명": "주공2단지", "세대 수": 556, "준공년월": 198512, "1km 내 전체 상가 개수": 2572}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.457937, 36.647022]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 15454, "단지명": "삼정(90-4)", "세대 수": 80, "준공년월": 198707, "1km 내 전체 상가 개수": 2768}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.459187, 36.647307]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 15456, "단지명": "삼정(90-8)", "세대 수": 150, "준공년월": 198911, "1km 내 전체 상가 개수": 2949}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.460919, 36.648841]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 15460, "단지명": "백봉", "세대 수": 240, "준공년월": 199203, "1km 내 전체 상가 개수": 2536}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.461002, 36.648192]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 15463, "단지명": "초원", "세대 수": 232, "준공년월": 199212, "1km 내 전체 상가 개수": 2641}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.422295, 36.625661]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 15464, "단지명": "평화", "세대 수": 175, "준공년월": 198809, "1km 내 전체 상가 개수": 2028}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.490558, 36.616401]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 15467, "단지명": "세원1차", "세대 수": 90, "준공년월": 198906, "1km 내 전체 상가 개수": 3949}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.489013, 36.61498]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 15468, "단지명": "세원2차", "세대 수": 120, "준공년월": 198912, "1km 내 전체 상가 개수": 4350}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.481204, 36.619236]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 15473, "단지명": "대림1차", "세대 수": 115, "준공년월": 198512, "1km 내 전체 상가 개수": 3078}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.469811, 36.650458]}, "properties": {"시군구": "충청북도 청주흥덕구 신봉동", "ID": 15475, "단지명": "한성", "세대 수": 290, "준공년월": 198707, "1km 내 전체 상가 개수": 2398}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.449553, 36.620932]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 17209, "단지명": "청주개신뜨란채2단지", "세대 수": 980, "준공년월": 200012, "1km 내 전체 상가 개수": 2324}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.440596, 36.614979]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 17430, "단지명": "가경푸르지오", "세대 수": 575, "준공년월": 200601, "1km 내 전체 상가 개수": 1747}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.439649, 36.619228]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 18756, "단지명": "청주가경뜨란채8단지", "세대 수": 321, "준공년월": 200510, "1km 내 전체 상가 개수": 2593}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.440249, 36.618149]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 18757, "단지명": "청주가경뜨란채7단지", "세대 수": 370, "준공년월": 200509, "1km 내 전체 상가 개수": 2246}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.421483, 36.62955]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 19182, "단지명": "비하계룡리슈빌", "세대 수": 480, "준공년월": 200609, "1km 내 전체 상가 개수": 2044}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.443595, 36.625555]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 22481, "단지명": "형석(2442)", "세대 수": 270, "준공년월": 199010, "1km 내 전체 상가 개수": 3558}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.438064, 36.638831]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 23706, "단지명": "주은", "세대 수": 220, "준공년월": 200212, "1km 내 전체 상가 개수": 1967}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.488061, 36.612002]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 23894, "단지명": "청주분평뜨란채1단지", "세대 수": 982, "준공년월": 200010, "1km 내 전체 상가 개수": 3963}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.462565, 36.6325]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 24345, "단지명": "대원칸타빌", "세대 수": 810, "준공년월": 200806, "1km 내 전체 상가 개수": 2881}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.477908, 36.637201]}, "properties": {"시군구": "충청북도 청주서원구 사직동", "ID": 24884, "단지명": "두산위브더제니스", "세대 수": 576, "준공년월": 200907, "1km 내 전체 상가 개수": 2899}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.41962, 36.639364]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 25027, "단지명": "대주피오레1차", "세대 수": 149, "준공년월": 200802, "1km 내 전체 상가 개수": 2016}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.473142, 36.611216]}, "properties": {"시군구": "충청북도 청주서원구 산남동", "ID": 25550, "단지명": "청주현진에버빌", "세대 수": 477, "준공년월": 200612, "1km 내 전체 상가 개수": 2388}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.463476, 36.613903]}, "properties": {"시군구": "충청북도 청주서원구 산남동", "ID": 25551, "단지명": "유승한내들", "세대 수": 464, "준공년월": 200707, "1km 내 전체 상가 개수": 1760}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.47103, 36.61043]}, "properties": {"시군구": "충청북도 청주서원구 산남동", "ID": 25552, "단지명": "계룡리슈빌", "세대 수": 551, "준공년월": 200702, "1km 내 전체 상가 개수": 1867}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.46474, 36.62737]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 25720, "단지명": "태암베스트윙", "세대 수": 118, "준공년월": 200509, "1km 내 전체 상가 개수": 2314}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.462892, 36.612747]}, "properties": {"시군구": "충청북도 청주서원구 산남동", "ID": 25844, "단지명": "산남퀸덤", "세대 수": 570, "준공년월": 200701, "1km 내 전체 상가 개수": 1388}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.46292, 36.610377]}, "properties": {"시군구": "충청북도 청주서원구 산남동", "ID": 25917, "단지명": "대원칸타빌1단지", "세대 수": 600, "준공년월": 200704, "1km 내 전체 상가 개수": 1103}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.47475, 36.609808]}, "properties": {"시군구": "충청북도 청주서원구 산남동", "ID": 25918, "단지명": "대원칸타빌2단지", "세대 수": 518, "준공년월": 200704, "1km 내 전체 상가 개수": 2838}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.463308, 36.609153]}, "properties": {"시군구": "충청북도 청주서원구 산남동", "ID": 25919, "단지명": "청주산남푸르지오", "세대 수": 760, "준공년월": 200704, "1km 내 전체 상가 개수": 1041}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.44898, 36.622985]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 25977, "단지명": "청주개신주공1단지", "세대 수": 1398, "준공년월": 200112, "1km 내 전체 상가 개수": 2486}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.425535, 36.619855]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 26051, "단지명": "가로수마을대원칸타빌", "세대 수": 310, "준공년월": 200809, "1km 내 전체 상가 개수": 1585}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.443618, 36.619129]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 26052, "단지명": "가경주공2단지", "세대 수": 704, "준공년월": 200212, "1km 내 전체 상가 개수": 2506}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.472937, 36.608457]}, "properties": {"시군구": "충청북도 청주서원구 산남동", "ID": 26054, "단지명": "부영사랑으로", "세대 수": 985, "준공년월": 200704, "1km 내 전체 상가 개수": 2007}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.426696, 36.621699]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 26151, "단지명": "가로수마을한라비발디", "세대 수": 416, "준공년월": 200808, "1km 내 전체 상가 개수": 2223}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.424583, 36.618634]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 26158, "단지명": "가경e-편한세상", "세대 수": 385, "준공년월": 200809, "1km 내 전체 상가 개수": 1043}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.428031, 36.622579]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 26163, "단지명": "가로수마을호반베르디움", "세대 수": 459, "준공년월": 200808, "1km 내 전체 상가 개수": 2639}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.45403, 36.61827]}, "properties": {"시군구": "충청북도 청주서원구 성화동", "ID": 26188, "단지명": "남양휴튼", "세대 수": 577, "준공년월": 200808, "1km 내 전체 상가 개수": 1461}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.466812, 36.657158]}, "properties": {"시군구": "충청북도 청주흥덕구 신봉동", "ID": 26213, "단지명": "청주신봉우림필유", "세대 수": 427, "준공년월": 200710, "1km 내 전체 상가 개수": 1305}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.428207, 36.639595]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 26493, "단지명": "신영지웰홈스", "세대 수": 452, "준공년월": 200912, "1km 내 전체 상가 개수": 3022}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.41905, 36.640893]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 26494, "단지명": "대주피오레2차", "세대 수": 189, "준공년월": 200809, "1km 내 전체 상가 개수": 1752}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.478014, 36.613211]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 26495, "단지명": "분평계룡리슈빌2단지", "세대 수": 150, "준공년월": 200807, "1km 내 전체 상가 개수": 3273}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.47856, 36.6127]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 26496, "단지명": "분평계룡리슈빌", "세대 수": 173, "준공년월": 200807, "1km 내 전체 상가 개수": 3259}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.460318, 36.616367]}, "properties": {"시군구": "충청북도 청주서원구 성화동", "ID": 26806, "단지명": "구룡산휴먼시아3단지", "세대 수": 470, "준공년월": 200905, "1km 내 전체 상가 개수": 1318}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.429696, 36.622696]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 26882, "단지명": "가로수마을선광로즈웰", "세대 수": 256, "준공년월": 200807, "1km 내 전체 상가 개수": 2937}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.47035, 36.632331]}, "properties": {"시군구": "충청북도 청주서원구 사직동", "ID": 26944, "단지명": "푸르지오캐슬1,2,3단지", "세대 수": 1832, "준공년월": 201011, "1km 내 전체 상가 개수": 2848}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.424932, 36.643941]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 27182, "단지명": "신영지웰시티1차", "세대 수": 2164, "준공년월": 201006, "1km 내 전체 상가 개수": 1978}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.443586, 36.614344]}, "properties": {"시군구": "충청북도 청주서원구 죽림동", "ID": 27617, "단지명": "청주가경주공3단지", "세대 수": 704, "준공년월": 200311, "1km 내 전체 상가 개수": 1702}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.424843, 36.624231]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 100655, "단지명": "낙원", "세대 수": 79, "준공년월": 198909, "1km 내 전체 상가 개수": 2421}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.456577, 36.644441]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 101025, "단지명": "신라", "세대 수": 277, "준공년월": 198511, "1km 내 전체 상가 개수": 2631}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.447957, 36.614346]}, "properties": {"시군구": "충청북도 청주서원구 성화동", "ID": 101838, "단지명": "성화호반베르디움", "세대 수": 840, "준공년월": 201206, "1km 내 전체 상가 개수": 1703}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.479041, 36.611737]}, "properties": {"시군구": "충청북도 청주서원구 분평동", "ID": 102106, "단지명": "대승스카이빌", "세대 수": 306, "준공년월": 200106, "1km 내 전체 상가 개수": 3146}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.47038, 36.626028]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 102759, "단지명": "일신베네스트", "세대 수": 198, "준공년월": 200411, "1km 내 전체 상가 개수": 1928}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.421547, 36.631425]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 103456, "단지명": "청주비하계룡리슈빌2차", "세대 수": 540, "준공년월": 200911, "1km 내 전체 상가 개수": 1812}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.451451, 36.611839]}, "properties": {"시군구": "충청북도 청주서원구 성화동", "ID": 103529, "단지명": "청주성화2다안채6단지", "세대 수": 533, "준공년월": 201302, "1km 내 전체 상가 개수": 1250}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.429262, 36.643547]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 104637, "단지명": "두산위브지웰시티2차", "세대 수": 1956, "준공년월": 201506, "1km 내 전체 상가 개수": 2244}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.46742, 36.625691]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 104955, "단지명": "개신우정", "세대 수": 236, "준공년월": 199707, "1km 내 전체 상가 개수": 1832}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.454172, 36.644556]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 104975, "단지명": "극동주얼리", "세대 수": 75, "준공년월": 199111, "1km 내 전체 상가 개수": 2135}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.42161, 36.637932]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 105199, "단지명": "미림", "세대 수": 71, "준공년월": 199007, "1km 내 전체 상가 개수": 2608}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.477681, 36.63765]}, "properties": {"시군구": "충청북도 청주서원구 사직동", "ID": 105216, "단지명": "미호", "세대 수": 110, "준공년월": 197910, "1km 내 전체 상가 개수": 2811}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.442801, 36.63633]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 105262, "단지명": "덕성", "세대 수": 498, "준공년월": 199112, "1km 내 전체 상가 개수": 2243}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.488643, 36.621999]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 105702, "단지명": "서원", "세대 수": 89, "준공년월": 198710, "1km 내 전체 상가 개수": 3748}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.47558, 36.630882]}, "properties": {"시군구": "충청북도 청주서원구 사직동", "ID": 106233, "단지명": "백두", "세대 수": 49, "준공년월": 199212, "1km 내 전체 상가 개수": 2251}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.46502, 36.634836]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 106463, "단지명": "두진하트리움에덴(도시형)", "세대 수": 297, "준공년월": 201411, "1km 내 전체 상가 개수": 3075}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.461881, 36.631109]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 106568, "단지명": "서울", "세대 수": 100, "준공년월": 197811, "1km 내 전체 상가 개수": 2654}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.466402, 36.624172]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 106605, "단지명": "개신재원", "세대 수": 180, "준공년월": 199806, "1km 내 전체 상가 개수": 1556}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.466565, 36.624786]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 106606, "단지명": "개신한사랑", "세대 수": 138, "준공년월": 199512, "1km 내 전체 상가 개수": 1613}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.461448, 36.632324]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 106607, "단지명": "주성", "세대 수": 199, "준공년월": 198106, "1km 내 전체 상가 개수": 2867}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.481947, 36.620158]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 106719, "단지명": "삼일맨션", "세대 수": 87, "준공년월": 198609, "1km 내 전체 상가 개수": 2804}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.467368, 36.629935]}, "properties": {"시군구": "충청북도 청주서원구 사직동", "ID": 106824, "단지명": "푸르지오캐슬4단지", "세대 수": 1219, "준공년월": 201011, "1km 내 전체 상가 개수": 2665}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.469502, 36.630269]}, "properties": {"시군구": "충청북도 청주서원구 사직동", "ID": 106825, "단지명": "푸르지오캐슬5단지", "세대 수": 548, "준공년월": 201011, "1km 내 전체 상가 개수": 2530}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.425688, 36.639404]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 106972, "단지명": "복대두진하트리움", "세대 수": 356, "준공년월": 201511, "1km 내 전체 상가 개수": 2841}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.429182, 36.625649]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 106997, "단지명": "경성하늘샵(도시형)", "세대 수": 160, "준공년월": 201306, "1km 내 전체 상가 개수": 3481}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.422155, 36.632338]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 107146, "단지명": "송정", "세대 수": 27, "준공년월": 200205, "1km 내 전체 상가 개수": 1894}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.427545, 36.624695]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 107198, "단지명": "주산휴네스트", "세대 수": 120, "준공년월": 201305, "1km 내 전체 상가 개수": 3101}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.445224, 36.618182]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 107459, "단지명": "라임스토리(도시형)", "세대 수": 56, "준공년월": 201209, "1km 내 전체 상가 개수": 2273}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.47716, 36.641974]}, "properties": {"시군구": "충청북도 청주서원구 사직동", "ID": 107954, "단지명": "부강", "세대 수": 40, "준공년월": 198504, "1km 내 전체 상가 개수": 2081}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.491406, 36.618316]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 108160, "단지명": "목화맨션(19-4)", "세대 수": 55, "준공년월": 198407, "1km 내 전체 상가 개수": 3107}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.448282, 36.633039]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 108584, "단지명": "명성", "세대 수": 100, "준공년월": 198801, "1km 내 전체 상가 개수": 2536}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.465787, 36.632172]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 108585, "단지명": "통경목련", "세대 수": 48, "준공년월": 199412, "1km 내 전체 상가 개수": 2983}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.445758, 36.626322]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 109146, "단지명": "청주", "세대 수": 60, "준공년월": 199104, "1km 내 전체 상가 개수": 3074}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.470312, 36.655678]}, "properties": {"시군구": "충청북도 청주흥덕구 신봉동", "ID": 109147, "단지명": "삼성(167)", "세대 수": 72, "준공년월": 199009, "1km 내 전체 상가 개수": 1644}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.445215, 36.617893]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 109733, "단지명": "어웰빌리지", "세대 수": 42, "준공년월": 201312, "1km 내 전체 상가 개수": 2212}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.428883, 36.626729]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 109825, "단지명": "신해블루지움(도시형)", "세대 수": 298, "준공년월": 201711, "1km 내 전체 상가 개수": 3561}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.48936, 36.623426]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 109868, "단지명": "덕일", "세대 수": 42, "준공년월": 198412, "1km 내 전체 상가 개수": 4214}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.476305, 36.626226]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 110869, "단지명": "모충동일센타시아", "세대 수": 240, "준공년월": 201604, "1km 내 전체 상가 개수": 2180}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.427588, 36.623515]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 111247, "단지명": "강서베리굿(도시형)", "세대 수": 154, "준공년월": 201511, "1km 내 전체 상가 개수": 2840}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.445458, 36.618219]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 111324, "단지명": "라임스토리2(도시형)", "세대 수": 53, "준공년월": 201412, "1km 내 전체 상가 개수": 2248}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.472298, 36.625163]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 111387, "단지명": "포스필", "세대 수": 76, "준공년월": 201507, "1km 내 전체 상가 개수": 2019}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.427363, 36.625172]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 111587, "단지명": "미소랑(도시형)", "세대 수": 168, "준공년월": 201409, "1km 내 전체 상가 개수": 3144}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.428792, 36.623917]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 111589, "단지명": "미소랑2차(도시형)", "세대 수": 112, "준공년월": 201512, "1km 내 전체 상가 개수": 3103}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.421751, 36.62776]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 111881, "단지명": "청주비하대광로제비앙1차", "세대 수": 418, "준공년월": 201802, "1km 내 전체 상가 개수": 2063}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.422857, 36.627224]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 111882, "단지명": "청주비하대광로제비앙2차", "세대 수": 110, "준공년월": 201802, "1km 내 전체 상가 개수": 2411}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.428026, 36.644388]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 112420, "단지명": "청주지웰시티푸르지오", "세대 수": 466, "준공년월": 201910, "1km 내 전체 상가 개수": 2039}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.472775, 36.625679]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 112518, "단지명": "삼덕", "세대 수": 84, "준공년월": 199703, "1km 내 전체 상가 개수": 2002}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.428103, 36.626473]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 112525, "단지명": "강서동광모닝스카이(도시형)", "세대 수": 298, "준공년월": 201606, "1km 내 전체 상가 개수": 3479}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.458905, 36.668136]}, "properties": {"시군구": "충청북도 청주흥덕구 송절동", "ID": 112540, "단지명": "테크노폴리스우미린", "세대 수": 1020, "준공년월": 201807, "1km 내 전체 상가 개수": 127}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.463501, 36.642679]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 112598, "단지명": "하이젠시티(도시형)", "세대 수": 298, "준공년월": 201508, "1km 내 전체 상가 개수": 3286}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.42935, 36.624109]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 112791, "단지명": "경도펠리스(도시형)", "세대 수": 104, "준공년월": 201603, "1km 내 전체 상가 개수": 3236}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.478126, 36.629803]}, "properties": {"시군구": "충청북도 청주서원구 사직동", "ID": 112872, "단지명": "덕희아파트", "세대 수": 203, "준공년월": 199402, "1km 내 전체 상가 개수": 2657}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.428616, 36.625001]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 112981, "단지명": "강서베리굿2차(도시형)", "세대 수": 285, "준공년월": 201608, "1km 내 전체 상가 개수": 3317}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.428012, 36.623652]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 113038, "단지명": "강서베리굿3차(도시형)", "세대 수": 144, "준공년월": 201706, "1km 내 전체 상가 개수": 2960}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.462558, 36.647947]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 113079, "단지명": "삼정맨숀(90-44)", "세대 수": 80, "준공년월": 198811, "1km 내 전체 상가 개수": 2774}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.429598, 36.625345]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 113157, "단지명": "세솔타운(도시형)", "세대 수": 72, "준공년월": 201312, "1km 내 전체 상가 개수": 3455}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.433031, 36.640501]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 113572, "단지명": "청주복대두진하트리움2차", "세대 수": 293, "준공년월": 201811, "1km 내 전체 상가 개수": 2542}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.46745, 36.63911]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 113940, "단지명": "로얄", "세대 수": 70, "준공년월": 198401, "1km 내 전체 상가 개수": 3414}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.429102, 36.625865]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 113953, "단지명": "우양센트럴(도시형)", "세대 수": 216, "준공년월": 201610, "1km 내 전체 상가 개수": 3494}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.430297, 36.616904]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 114461, "단지명": "청주가경아이파크", "세대 수": 905, "준공년월": 201904, "1km 내 전체 상가 개수": 1321}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.451535, 36.634102]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 114466, "단지명": "포빌(도시형)", "세대 수": 299, "준공년월": 201702, "1km 내 전체 상가 개수": 2573}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.467564, 36.635952]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 114607, "단지명": "평화", "세대 수": 60, "준공년월": 198111, "1km 내 전체 상가 개수": 3205}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.448517, 36.633514]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 114806, "단지명": "효성", "세대 수": 49, "준공년월": 198508, "1km 내 전체 상가 개수": 2530}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.456751, 36.636303]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 114997, "단지명": "청우", "세대 수": 75, "준공년월": 197901, "1km 내 전체 상가 개수": 3105}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.477673, 36.62684]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 115030, "단지명": "세진", "세대 수": 35, "준공년월": 198611, "1km 내 전체 상가 개수": 2308}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.489978, 36.620474]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 115066, "단지명": "남부", "세대 수": 80, "준공년월": 198105, "1km 내 전체 상가 개수": 3491}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.454385, 36.668232]}, "properties": {"시군구": "충청북도 청주흥덕구 송절동", "ID": 115388, "단지명": "청주테크노폴리스우방아이유쉘1단지", "세대 수": 427, "준공년월": 201811, "1km 내 전체 상가 개수": 82}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.455219, 36.667285]}, "properties": {"시군구": "충청북도 청주흥덕구 송절동", "ID": 115389, "단지명": "청주테크노폴리스우방아이유쉘2단지", "세대 수": 424, "준공년월": 201811, "1km 내 전체 상가 개수": 92}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.457418, 36.669517]}, "properties": {"시군구": "충청북도 청주흥덕구 송절동", "ID": 115428, "단지명": "청주테크노폴리스푸르지오", "세대 수": 1034, "준공년월": 201811, "1km 내 전체 상가 개수": 97}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.491965, 36.614878]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 115456, "단지명": "진흥", "세대 수": 50, "준공년월": 198907, "1km 내 전체 상가 개수": 4170}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.490581, 36.615151]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 115878, "단지명": "수정", "세대 수": 72, "준공년월": 198912, "1km 내 전체 상가 개수": 4235}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.462059, 36.642063]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 116286, "단지명": "아이제이포커스(도시형)", "세대 수": 270, "준공년월": 201704, "1km 내 전체 상가 개수": 3525}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.456638, 36.634001]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 116400, "단지명": "현대(150-1)", "세대 수": 25, "준공년월": 198511, "1km 내 전체 상가 개수": 2749}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.429258, 36.626378]}, "properties": {"시군구": "충청북도 청주흥덕구 강서동", "ID": 116600, "단지명": "이랜드타운힐스싱글스위트청주(도시형)", "세대 수": 288, "준공년월": 201911, "1km 내 전체 상가 개수": 3563}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.445343, 36.61843]}, "properties": {"시군구": "충청북도 청주서원구 개신동", "ID": 116848, "단지명": "수펠리스(도시형)", "세대 수": 60, "준공년월": 201606, "1km 내 전체 상가 개수": 2307}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.463674, 36.634411]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 117342, "단지명": "헤렌하우스", "세대 수": 28, "준공년월": 201312, "1km 내 전체 상가 개수": 2991}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.449118, 36.633191]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 119493, "단지명": "현대(169-1)", "세대 수": 40, "준공년월": 198612, "1km 내 전체 상가 개수": 2673}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.462607, 36.631043]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 119678, "단지명": "부흥", "세대 수": 40, "준공년월": 198406, "1km 내 전체 상가 개수": 2615}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.432012, 36.615835]}, "properties": {"시군구": "충청북도 청주흥덕구 가경동", "ID": 119848, "단지명": "청주가경아이파크2단지", "세대 수": 664, "준공년월": 202002, "1km 내 전체 상가 개수": 1389}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.450664, 36.663064]}, "properties": {"시군구": "충청북도 청주흥덕구 송절동", "ID": 119895, "단지명": "청주테크노폴리스지웰", "세대 수": 336, "준공년월": 202002, "1km 내 전체 상가 개수": 116}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.48958, 36.61338]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 120294, "단지명": "두진한라", "세대 수": 75, "준공년월": 199001, "1km 내 전체 상가 개수": 4132}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.448945, 36.632702]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 120407, "단지명": "덕성그린", "세대 수": 86, "준공년월": 199612, "1km 내 전체 상가 개수": 2611}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.472227, 36.653798]}, "properties": {"시군구": "충청북도 청주흥덕구 운천동", "ID": 120489, "단지명": "운천거성하모니", "세대 수": 164, "준공년월": 201601, "1km 내 전체 상가 개수": 1964}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.479937, 36.632346]}, "properties": {"시군구": "충청북도 청주서원구 사직동", "ID": 120587, "단지명": "벨라맨션", "세대 수": 54, "준공년월": 198209, "1km 내 전체 상가 개수": 5231}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.481747, 36.621168]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 120667, "단지명": "힐탑", "세대 수": 60, "준공년월": 199105, "1km 내 전체 상가 개수": 2954}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.473171, 36.62524]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 120669, "단지명": "원당맨션", "세대 수": 40, "준공년월": 199006, "1km 내 전체 상가 개수": 2048}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.421804, 36.625636]}, "properties": {"시군구": "충청북도 청주흥덕구 비하동", "ID": 121292, "단지명": "재원", "세대 수": 84, "준공년월": 199104, "1km 내 전체 상가 개수": 1899}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.461739, 36.631548]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 121580, "단지명": "조양(371-4)", "세대 수": 35, "준공년월": 197812, "1km 내 전체 상가 개수": 2770}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.454712, 36.63387]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 122998, "단지명": "현대(881-2)", "세대 수": 24, "준공년월": 198511, "1km 내 전체 상가 개수": 2643}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.465153, 36.64197]}, "properties": {"시군구": "충청북도 청주흥덕구 봉명동", "ID": 123083, "단지명": "봉명(826)", "세대 수": 45, "준공년월": 198612, "1km 내 전체 상가 개수": 3203}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.490005, 36.617904]}, "properties": {"시군구": "충청북도 청주서원구 수곡동", "ID": 124340, "단지명": "삼일", "세대 수": 50, "준공년월": 198409, "1km 내 전체 상가 개수": 3300}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.458496, 36.6341]}, "properties": {"시군구": "충청북도 청주서원구 사창동", "ID": 124734, "단지명": "현대(154-1)", "세대 수": 48, "준공년월": 198511, "1km 내 전체 상가 개수": 3004}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.451625, 36.633121]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 125616, "단지명": "삼보맨션", "세대 수": 35, "준공년월": 198707, "1km 내 전체 상가 개수": 2729}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.455853, 36.633498]}, "properties": {"시군구": "충청북도 청주흥덕구 복대동", "ID": 126066, "단지명": "현대(908-2)", "세대 수": 35, "준공년월": 198412, "1km 내 전체 상가 개수": 2694}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.47361, 36.655211]}, "properties": {"시군구": "충청북도 청주흥덕구 운천동", "ID": 127085, "단지명": "일심", "세대 수": 75, "준공년월": 198407, "1km 내 전체 상가 개수": 1895}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.480048, 36.644352]}, "properties": {"시군구": "충청북도 청주서원구 사직동", "ID": 127144, "단지명": "삼원맨션", "세대 수": 45, "준공년월": 198412, "1km 내 전체 상가 개수": 2707}}, {"type": "Feature", "geometry": {"type": "Point", "coordinates": [127.472699, 36.629448]}, "properties": {"시군구": "충청북도 청주서원구 모충동", "ID": 129009, "단지명": "보영", "세대 수": 30, "준공년월": 199112, "1km 내 전체 상가 개수": 2311}}]}, //data from dataframe output to geojson
            "buffer": 0,
            "maxzoom": 14,
            "generateId": true
        });

        map.addLayer({
            "id": "label",
            "source": "data",
            "type": "symbol",
            "maxzoom": 24,
            "minzoom": 0,
            "layout": {
                
                "text-size" : generateInterpolateExpression('zoom', [[0, 8],[22, 3* 8]] ),
                "text-offset": [0,-1]
            },
            "paint": {
                "text-halo-color": "white",
                "text-halo-width": generatePropertyExpression('interpolate', 'zoom', [[0,1], [18,5* 1]]),
                "text-color": ["case",
                    ["boolean", ["feature-state", "hover"], false], 
                    "black", 
                    "#131516"]
            }
        }, "" )

        map.addLayer({
            "id": "circle",
            "source": "data",
            "type": "circle",
            "maxzoom": 24,
            "minzoom": 0,
            "paint": {
                
                    "circle-color": ["case",
                        ["boolean", ["feature-state", "hover"], false], 
                        "black", 
                        generatePropertyExpression("interpolate", "1km 내 전체 상가 개수", [[82, 'rgb(215,48,39)'], [699, 'rgb(244,109,67)'], [1316, 'rgb(253,174,97)'], [1933, 'rgb(254,224,144)'], [2550, 'rgb(255,255,191)'], [3167, 'rgb(224,243,248)'], [3784, 'rgb(171,217,233)'], [4401, 'rgb(116,173,209)'], [5018, 'rgb(69,117,180)']], "white" )],
                    
                
                    "circle-radius" : generatePropertyExpression("interpolate", "1km 내 전체 상가 개수", [[82, 2.0], [699, 3.44], [1316, 4.89], [1933, 6.33], [2550, 7.78], [3167, 9.22], [3784, 10.67], [4401, 12.11], [5018, 13.56]], 4 ),
                    
                "circle-stroke-color": ["case",
                    ["boolean", ["feature-state", "hover"], false], 
                    "black", 
                    "black"],
                "circle-stroke-width": generatePropertyExpression('interpolate', 'zoom', [[0,0.5], [18,5* 0.5]]),
                "circle-opacity" : 0.7,
                "circle-stroke-opacity" : 0.7
            }
        }, "label");
        
        

        // Popups
        
            var popupAction = 'mousemove',
                popupSettings =  {
                    closeButton: false,
                    closeOnClick: false
                };
        

        // Create a popup
        var popup = new mapboxgl.Popup(popupSettings);

        
        
        var hoveredStateId = 0;
        
        // Show the popup on mouseover
        map.on(popupAction, function(e) {
            
            var features = map.queryRenderedFeatures(e.point, {layers: ['circle', 'label'] });

            if (features.length > 0) {
                map.getCanvas().style.cursor = 'pointer';
                var f = features[0];
                newHoveredStateId = f.id;
                if (newHoveredStateId != hoveredStateId) {
                    map.removeFeatureState({source: 'data', id: hoveredStateId});
                    hoveredStateId = newHoveredStateId;
                }
                map.setFeatureState({source: 'data', id: hoveredStateId}, { hover: true});
                let popup_html = '<div><li><b>Location</b>: ' + f.geometry.coordinates[0].toPrecision(6) + 
                    ', ' + f.geometry.coordinates[1].toPrecision(6) + '</li>';

                for (key in f.properties) {
                    popup_html += '<li><b> ' + key + '</b>: ' + f.properties[key] + ' </li>'
                }

                popup_html += '</div>'
                popup.setLngLat(e.lngLat)
                    .setHTML(popup_html)
                    .addTo(map);
            }
            else {
                map.getCanvas().style.cursor = '';
                popup.remove();
                map.removeFeatureState({source: 'data', id: hoveredStateId});
            }
        });

        
        
        // Fly to on click
        map.on('click', 'circle', function(e) {
            map.easeTo({
                center: e.features[0].geometry.coordinates
            });
        });
    });
    


</script>

<!-- add capability to export map or legend to image file -->

    <script src="https://github.com/niklasvh/html2canvas/releases/download/v1.0.0-alpha.12/html2canvas.min.js" charset="utf-8"></script>
    <style>
    .mapboxgl-ctrl-icon.screencap-icon {background-image: url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEi%0D%0AIGlkPSJhdHRyYWN0aW9uLTE1IiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdp%0D%0AZHRoPSIxNXB4IiBoZWlnaHQ9IjE1cHgiIHZpZXdCb3g9IjAgMCAxNSAxNSI+CiAgPHBhdGggaWQ9%0D%0AInJlY3Q3MTQzIiBkPSJNNiwyQzUuNDQ2LDIsNS4yNDc4LDIuNTA0NSw1LDNMNC41LDRoLTJDMS42%0D%0ANjksNCwxLDQuNjY5LDEsNS41djVDMSwxMS4zMzEsMS42NjksMTIsMi41LDEyaDEwJiN4QTsmI3g5%0D%0AO2MwLjgzMSwwLDEuNS0wLjY2OSwxLjUtMS41di01QzE0LDQuNjY5LDEzLjMzMSw0LDEyLjUsNGgt%0D%0AMkwxMCwzQzkuNzUsMi41LDkuNTU0LDIsOSwySDZ6IE0yLjUsNUMyLjc3NjEsNSwzLDUuMjIzOSwz%0D%0ALDUuNSYjeEE7JiN4OTtTMi43NzYxLDYsMi41LDZTMiw1Ljc3NjEsMiw1LjVTMi4yMjM5LDUsMi41%0D%0ALDV6IE03LjUsNWMxLjY1NjksMCwzLDEuMzQzMSwzLDNzLTEuMzQzMSwzLTMsM3MtMy0xLjM0MzEt%0D%0AMy0zUzUuODQzMSw1LDcuNSw1eiYjeEE7JiN4OTsgTTcuNSw2LjVDNi42NzE2LDYuNSw2LDcuMTcx%0D%0ANiw2LDhsMCwwYzAsMC44Mjg0LDAuNjcxNiwxLjUsMS41LDEuNWwwLDBDOC4zMjg0LDkuNSw5LDgu%0D%0AODI4NCw5LDhsMCwwQzksNy4xNzE2LDguMzI4NCw2LjUsNy41LDYuNSYjeEE7JiN4OTtMNy41LDYu%0D%0ANXoiLz4KPC9zdmc+'); background-position: center;  background-repeat: no-repeat; cursor: default; background-color: rgba(0,0,0,0.05); }
    .mapboxgl-ctrl.mapboxgl-ctrl-group.ctrl-group-horizontal { height: 30px; }
    .mapboxgl-ctrl.mapboxgl-ctrl-group.ctrl-group-horizontal > button { min-width: 30px; width: auto; height: 30px; display: inline-block !important; box-sizing: none; border-top: none; border-left: 1px solid #ddd; border-right: 1px solid #ddd;     vertical-align: top; }
    .mapboxgl-ctrl.mapboxgl-ctrl-group.ctrl-group-horizontal > button > a { color: #6e6e6e; text-decoration: none; font: 12px/20px 'Helvetica Neue', Arial, Helvetica, sans-serif; }
    .mapboxgl-ctrl.mapboxgl-ctrl-group.ctrl-group-horizontal > button:first-child,
    .mapboxgl-ctrl.mapboxgl-ctrl-group.ctrl-group-horizontal > button:last-child { border: none; }
    .mapboxgl-ctrl.mapboxgl-ctrl-group.ctrl-group-horizontal > button:not(:first-child) { padding: 0 4px 0 4px; }
</style>

<script type="text/javascript">

    var buttonContainer = document.getElementsByClassName('mapboxgl-ctrl-top-left')[0],
        downloadControl = document.createElement('div');
    downloadControl.className = 'mapboxgl-ctrl mapboxgl-ctrl-group ctrl-group-horizontal'; 
    downloadControl.id = 'download-controls';
    buttonContainer.appendChild(downloadControl);

    document.getElementById('download-controls').innerHTML = `<button class="mapboxgl-ctrl-icon screencap-icon"></button><button><a class="download-button" href="#" title="Download map as .png" id="btn-download-map" download="map.png">Map</a></button><button><a class="download-button" href="#" title="Download legend as .png" id="btn-download-legend" download="legend.png">Legend</a></button>`;

    html2canvas(document.body).then(canvas => {
        var legendButton = document.getElementById('btn-download-legend');
        legendButton.addEventListener('click', function (e) {
            legendButton.href = canvas.toDataURL('image/png');
        });
    });

    var mapButton = document.getElementById('btn-download-map');
    mapButton.addEventListener('click', function (e) {
        var mapCanvas = map.getCanvas();
        mapButton.href = mapCanvas.toDataURL('image/png');
    });

</script>


</body>
</html>